name: Update Daily News

on:
  # 1. Ch·∫°y t·ª± ƒë·ªông theo l·ªãch
  schedule:
    # Ch·∫°y v√†o 01:00 UTC m·ªói ng√†y, t∆∞∆°ng ƒë∆∞∆°ng 8:00 s√°ng gi·ªù Vi·ªát Nam (UTC+7)
    - cron: '0 1 * * *'
    
  # 2. Cho ph√©p ch·∫°y th·ªß c√¥ng t·ª´ tab Actions tr√™n GitHub
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      # B∆∞·ªõc 1: L·∫•y m√£ ngu·ªìn t·ª´ repository v·ªÅ m√°y ·∫£o
      - name: Checkout repository
        uses: actions/checkout@v4

      # B∆∞·ªõc 2: Thi·∫øt l·∫≠p m√¥i tr∆∞·ªùng Python
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10' # C√≥ th·ªÉ d√πng '3.x'

      # B∆∞·ªõc 3: C√†i ƒë·∫∑t c√°c th∆∞ vi·ªán c·∫ßn thi·∫øt t·ª´ t·ªáp requirements.txt
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # B∆∞·ªõc 4: Ch·∫°y script Python ch√≠nh ƒë·ªÉ l·∫•y tin v√† t·∫°o file index.html
      - name: Run script to fetch news and generate HTML
        run: python main.py

      # B∆∞·ªõc 5: T·ª± ƒë·ªông commit v√† ƒë·∫©y t·ªáp index.html m·ªõi l√™n repository
      - name: Commit and push if there are changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "üì∞ C·∫≠p nh·∫≠t tin t·ª©c t·ª± ƒë·ªông"
          file_pattern: index.html
          commit_user_name: "GitHub Actions Bot"
          commit_user_email: "actions@github.com"
          commit_author: "GitHub Actions Bot <actions@github.com>"